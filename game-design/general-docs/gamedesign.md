# Геймдизайн - Общие положения

### В документе описываются ключевые тезисы, связанные с ними вопросы и варианты решения.

**Структура:** Документ делится на тематические разделы, состоящие из отдельных пунктов. В некоторых случаях после номера стоит маркировка:

- Пункты, отмеченные (!) являются основополагающими и не подлежат обсуждению. Они используются как основа для решения спорных моментов.
- Пункты, отмеченные (?) нуждаются в дополнительном обсуждении, поскольку рождают вопросы. Эти вопросы с вариантами решения перечислены в конце документа.
- Неотмеченные пункты находятся в подвешенном состоянии, их можно как записать в базовые, так и вынести на обсуждение.
- Конечная цель - избавиться от всех "спорных" пунктов, перевести все пункты в категорию "базовые".

Сам документ не претендует на фундаментальность, может (и даже, пожалуй, должен) изменяться в процессе разработки с появлением новых вводных. По сути это - рабочий инструмент, доска, где закрепляются рабочие средства, актуальные задачи и предложения их решения.

## Взаимодействие игроков

1. **(!)** Игроки объединяются в группы (кластеры), на начальном этапе их число на один кластер - 8 игроков на масштаб карты 1024х1024. В дальнейшем масштаб будет увеличен.
2. **(!)** Значительная часть игрового процесса строится вокруг взаимодействия игроков: они могут воевать, объединяться в союзы (кланы, альянсы), торговать, держать нейтралитет и т.д. Каждая из этих форм взаимодействия отличается глубокой геймплейной проработкой.
3. **(?)** Помимо игроков на карте присутствуют NPC, вписанные в контекст посредством нарратива. В зависимости от эпохи это может быть племя, другое королевство, чужая страна, иноземная раса пришельцев и т.д.
4. **(!)** Планируется взаимодействие игроков из разных эпох (первобытные варвары против космодесантников)
5. **(?)** Игроки из разных эпох взаимодействуют в свободном режиме или специальном режиме PvP.
6. **(?)** Игра не останавливается, когда игрок офлайн. На него можно напасть.
7. Игроки одного кластера плюс-минус подогнаны по одному уровню.
8. **(?)** В случае, если один из игроков сильно опережает в развитии соседей по кластеру, он меняет кластер на более подходящий своему уровню.
9. **(!)** Глобальная задача: создать игру, в которой можно будет "жить".

---

## Эпохи, периоды и процесс перехода

1. **(!)** Эпохи идут одна за другой и открываются последовательно.
2. **(!)** Каждая эпоха делится на периоды - по 5-6 на каждую эпоху.
3. **(!)** Каждая эпоха обладает уникальным сеттингом на все её периоды.
4. **(!)** Каждый период обладает уникальной сюжетной кампанией, противниками и боссами, доступными только в рамках данного периода (возможно присутствие боссов и в других периодах в виде глобальных событий/испытаний за дополнительную награду)
5. **(!)** Продвижение по периодам обогащает игровой процесс, игровые механики каждой эпохи равномерно распределены на её периоды с переносом (в палеолите - самые базовые, в Бронзовом веке - максимальный геймплей Тёмной эпохи)
6. Игровой процесс в разных эпохах отличается более значительно - во имя разнообразия и стимулирования игроков не забывать о прошлых эпохах, чтобы возвращение в более ранние эпохи и игра за них в PvP-режиме не были для игроков "даунгрейдом" и имели практический смысл (если человеку просто нравится играть в сеттинге Средневековья больше, чем в космическом, он не должен чувствовать, что отказывается от более развитого геймплея).
7. Переход из одного периода в другой не меняет игровую карту - игрок остаётся на том же месте.
8. Переход в новую эпоху означает смену карты и новый ландшафт.
9. **(?)** Переход в новый период или эпоху означает смену кластера.
10. **(!)** Переход в новый период или эпоху НЕ может произойти против желания игрока.
11. **(!)** Возможность перехода в новый период или эпоху может появиться у игрока при выполнении _одного из_ условий, которые не взаимосключают друг друга, а дают игроку выбор, как именно получить эту возможность.
12. **(?)** Возможность перехода появляется при достижении определённого игрового опыта/выполнения определённых геймплейных условий.
13. **(!)** Возможность перехода появляется при прохождении сюжетной кампании периода до конца.
14. **(?)** Возможность перехода появляется сама, когда набирается условный "счётчик", заполняемый всеми игроками кластера в равной степени. "Счётчик" заполняется, когда любой из игроков изучает новые технологии, совершает определённые действия, проходит квесты сюжетной кампании и т.д.
15. **(?)** Игрок может в любой момент вернуться в более ранние эпохи (периоды тоже?) при условии, что он в них уже побывал.

---

## Генерация карты

1. **(!)** Весь игровой процесс происходит на сгенерированной карте, которая может обновляться в реальном времени.
2. **(!)** На состояние карты могут повлиять действия игроков, глобальные события, течение времени и т.д.
3. **(!)** Смена эпохи означает смену карты.
4. **(!)** Карты уникальны для каждого кластера.
5. **(!)** Все карты объединены ключевыми географическими объектами, которые есть в игровом лоре эпохи. Они являются своеобразной осью, которая проходит через все эпохи и связывает их. Эти объекты заданы в критерии генерации карты и могут располагаться случайным образом.
6. Тем не менее состав и количество таких "лорных" объектов может меняться от эпохи к эпохе: одни уходят, другие появляются, третьи пройдут весь путь от Тёмной эпохи до космоса.
7. **(?)** Для каждой эпохи - свои параметры генерации карты. Визуал каждой эпохи уникален, и карту Античности легко отличить от карты Средневековья.
8. **(?)** Смена периода незначительно изменяет карту: визуальный стиль остаётся прежним, но происходят небольшие перемены ландшафта.

---

## Вопросы:

1. **Как именно будет реализована система столкновения разных эпох?**

- Если игроки одного кластера находятся на примерно одном уровне, они вряд ли будут существовать в разных эпохах. Можно ввести функцию выбора эпохи из числа уже открытых игроком и свободное переключение между ними. Однако, переключаться на предыдущие эпохи, когда дошёл до максимальной - странно и невыгодно. И не будет ли происходить конфликт ландшафта?
- Если игроки одного кластера не подгоняются по уровню, а распределяются случайно, чтобы можно было попасть в компанию из разных эпох, это может быть несправедливо по отношению к новичкам и требует усиленной проработки баланса. Поэтому такой вариант не предпочтителен.
- В изначальном концепте игры есть упоминание отдельного PvP-режима одиночных битв в разных форматах. Это наиболее удобный вариант для реализации идеи пересечения эпох, однако в процессе работы сложилось впечатление, что от этой идеи отказались - режим у игры должен быть один постоянный, в котором всё и происходит, и развитие, и взаимодействие. Если это не так и никакого отказа не было, то вопрос снимается, режим PvP переходит в категорию "базовых" пунктов.
- Функцию свободного переключения между открытыми эпохами так же можно закрепить в режиме свободной игры и вынести на обсуждение детали её реализации.

2. **NPC** 

- Сюжетные противники одни на кластер для всех игроков? "Боссы" (типа медведя Урсы) существуют в одном экземпляре или в количестве, равном количеству игроков в кластере? В этом случае каждая копия босса существует для "своего" игрока, но отсутствует для других? Это позволит каждому игроку развиваться в своём темпе независимо от других и лишит ситуации, что игрок по сюжету добрался до босса, который уже давно убит другими игроками. Однако технически звучит довольно странно и может быть сложно реализуемо.
- Другой вариант: NPC как таковые отсутствуют в принципе, их роль, в т.ч. "боссов" могут выполнять другие игроки. Например, когда один из игроков решает запустить сюжетный квест, он как бы оставляет заявку, на которую может ответить любой другой игрок из его кластера, чтобы отыграть роль сюжетных противников. Такой вариант с одной стороны снимает все вопросы, связанные с вражеским ИИ (за отсутствием самого ИИ), однако ставит много других вопросов: баланс? игра в поддавки? нечестная прокачка? Параллельная сюжетная линия за врагов? Так, стоп. А это идея...
- Исходя из предыдущего варианта: Параллельная сюжетная линия за врагов. Её квесты полностью идентичны основной, но рассказывают историю с другой стороны. Грубо говоря, в одном и том же сюжете один игрок отыгрывает "людей", а другой - "орков". В этом случае все их сюжетные стычки - это стычки живых игроков, а не игроков с компьютером. Это звучит интересно, но тоже рождает кучу других вопросов: игроки делятся на пары? как играть за медведя в палеолите, а главное - зачем? в этом случае все квесты завязаны на онлайне других игроков? В общем, тоже сомнительно, но обсудить отдельно можно.
- Наиболее рабочим вариантом мне кажется респаун противников и боссов. Обычные NPC-противники и их лагеря генерируются на постоянной основе в случайных местах карты и не могут закончиться - как и дикие животные. Это обеспечит симуляцию живого мира: игроки уничтожили вражеское племя, но через какое-то время оно восстановилось. Что касается "боссов" или легендарных противников - они существуют в единственном экземпляре для всех игроков кластера, но могут возрождаться через какое-то время. В этом случае существует вариативность: игрок может и сам атаковать босса в любое время, и объединиться с другими игроками, чтобы вместе его уничтожить, и проходить его по сюжету с сюжетными баффами, находясь в контексте... И всё это можно повторять ради новых наград, время от времени приходить к медведю Урсе и начищать ему морду. Так же такой вариант даёт возможность не привязывать боссов к сюжету или связанным с ними событиям, но дать им возможность всегда присутствовать на игровой карте, держать какой-то район, время от времени огребать от игроков и снова возрождаться.

3. **Офлайн - что происходит с игроком, когда он не играет?**

- Игра никогда не останавливается. Если цель в том, чтобы игроки жили в ней, это означает, что никакие процессы не ставятся на паузу с выходом из игры: юниты продолжают собирать ресурсы, воины патрулируют местность и т.д. Это идеальный вариант для тех, кто готов посвящать игре максимум времени, но есть и "подводные". Например, достаточно пары раз, чтобы включив игру неопытный игрок обнаружил своё поселение уничтоженным другими игроками, которые подгадали его уход, и он навсегда игру бросил. Стоит ли продумать какую-то внутреннюю защиту "новичков"? 
- Как минимум, можно гарантировать игрокам защиту хотя бы от нападений NPC, когда они офлайн. А "живым" противникам усложнить задачу - сделать юниты и строения в офлайне "фантомными": они как бы есть, их можно изучить и запомнить, но нельзя напасть. Можно помешать, например, обнести рудники стенами, понаставить вышек вокруг поселения, в общем - обложить. В этом случае игрок сможет при заходе в игру и обнаружив врага у ворот предпринять какие-то действия.
- Ещё, как вариант, продумать систему оповещений. Чтобы на условную почту игроку приходили сообщения, что на него напали. Либо создать приложение-компаньон, которое не заменит саму игру, но поможет контролировать состояние своего поселения на работе/учёбе/в дороге. Такое решение одновременно сохранит систему "жить в игре", и в то же время избавит игроков от неприятных сюрпризов. Это будет более честно, особенно по отношению к новичкам.

4. **Перенос прогресса между эпохами**

- Можно, чтобы при смене эпохи все (или почти все) постройки и юниты игрока переносились с сохранением своего архетипа. Например, "хижина рыбака" становилась "пристанью", "дом вождей" - "дворцом", "хижина шамана" - "храмом", и т.д. То же самое и с юнитами. Сохраняется расположение и функционал, меняется дизайн под новую эпоху. Вижу здесь плюсы в том, что прогресс не исчезает и не надо начинать с нуля, все изученные механики не надо изучать заново. Минусы - в куче технических нюансов. Размеры не меняются? Как будет подгоняться карта? Ландшафт ведь будет иной. Как решить проблему "перекача"? Игрок ведь может развиться до гигачада, занять огромную площадь, а потом весь этот прогресс перенести в новую эпоху - и что ему там делать? Короче, вариант красивый, но очень сильно сомнительный.
- Возможно, надо продумать вариант какого-то "мягкого" отката. Например, поставить лимит на количество переносимых построек и юнитов, и чтобы игрок мог сам выбрать, что он перенесёт. Просто, чтобы он не оказывался на новой карте опять бобылём, а сам отвечал за свой сет-ап.
- Можно также задавать игроку в новой эпохе какой-то базовый комплект юнитов и построек, тупо всё самое необходимое. Ими он уже может распоряжаться по своему усмотрению. Также, если дать функцию свободного перехода между открытыми эпохами, игрок сможет вернуться из Античности, например, в Тёмную эпоху, и там всё останется, как было (если конечно другие игроки всё не разнесут). Игрой это будет считаться, что игрок офлайн для эпохи, в которой он не играет. Дальше работают правила офлайна, которые мы утвердим.

5. **Переход и другие игроки**

- Всё же непонятно, как именно переход в следующую эпоху влияет на комплектацию кластера. Игрок покидает своих прежних союзников и соперников и идёт дальше? А если он вступил с ними в один альянс? Они закрепляются у него где-то в профиле, и он всегда может к ним вернуться, следить за их прогрессом, возвращаться назад к ним на выручку, если понадобится? Или необходима какая-то синхронизация прогресса игроков, чтобы они двигались все вместе? Всё-таки могут ли существовать на одной карте разные эпохи или нет?
- В общем, по этому поводу у меня миллион вопросов, но ни одного ответа. Чувствуется, что нужен какой-то один резкий удар, чтобы этот Гордиев узел из вопросов просто разрубить.

6. **Переход и генерация карты**

- Если утверждаем и берём за основу тезис "Смена периода изменяет ландшафт" - как это синергирует с прогрессом других игроков? Если смена периода - индивидуальный процесс, т.е. каждый игрок продвигается в развитии в своём темпе - как может измениться ландшафт только для одного из игроков кластера? Здесь нужно от чего-то отказываться: либо от индивидуального развития (чтобы каждый сам себе менял период вне зависимости от других игроков), либо от влияния перехода на игровую карту и ландшафт. Компромиссного варианта я пока не вижу.
- Возможно, дабы избежать самых разных проблем и багов при генерации (например, когда какие-то ключевые объекты сгружаются в одну кучу, или просто получаются несбалансированные и нечестные условия для разных игроков - кому-то повезло с начальной точкой, а кто-то зареспаунился на голом острове без деревьев), есть смысл один раз вручную самим создать карту для каждой эпохи, забалансить её, задизайнить - а потом оставить на растерзание игрокам. Грубо говоря, начальная точка для всех игроков всех кластеров - одна, но если посмотреть через год непрерывной игры - это будут кардинально разные карты: где-то реки высушили, где-то наоборот игроки вызвали наводнение и всё затопили, пришлось ютиться на горах, где-то холмы и горы сравняли с землёй, где-то всю карту перерыли подземными норами... Всё это услоаные примеры, если что. Суть в том, чтобы карта была своего рода пластилином, её ландшафт мог очень гибко меняться, а все действия игроков оставались на ней навсегда, как шрамы.

---